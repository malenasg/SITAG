{% extends 'base.html' %}
{% load static %}

{% block title %}Detalle Trabajo | SITAG{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'trabajos/css/detalles_trabajo.css' %}">

<div class="wrapper-sitag">

    <!-- DATOS PRINCIPALES -->
    <div class="card-sitag">
        <h2 class="card-title-sitag"><i class="fa-solid fa-clipboard-list"></i> Datos del Trabajo</h2>

        <div class="data-item">
            <strong>T√≠tulo</strong>
            <span>{{ trabajo.titulo }}</span>
        </div>

        <div class="data-item">
            <strong>Descripci√≥n</strong>
            <span>{{ trabajo.descripcion }}</span>
        </div>

        <div class="data-item">
            <strong>Estado</strong>
            <span>{{ trabajo.estado }}</span>
        </div>

        <div class="data-item">
            <strong>Fecha de inicio</strong>
            <span>{{ trabajo.fecha_inicio }}</span>
        </div>
    </div>

    <!-- CLIENTE -->
    <div class="card-sitag">
        <h2 class="card-title-sitag"><i class="fa-solid fa-user"></i> Cliente asociado</h2>

        <div class="data-item">
            <strong>Nombre</strong>
            <span>{{ cliente.nombre }}</span>
        </div>

        <div class="data-item">
            <strong>Tel√©fono</strong>
            <span>{{ cliente.telefono }}</span>
        </div>

        <div class="data-item">
            <strong>Email</strong>
            <span>{{ cliente.email }}</span>
        </div>

        <div class="data-item">
            <strong>Direcci√≥n</strong>
            <span>{{ cliente.direccion }}</span>
        </div>
    </div>

    <!-- PLANOS -->
    <div class="card-sitag">
        <h2 class="card-title-sitag"><i class="fa-solid fa-ruler-combined"></i> Planos asociados</h2>

        {% if planos %}
            <ul class="list-sitag">
                {% for plano in planos %}
                    <li>
                        <strong>{{ plano.descripcion }}</strong>
                        {% if plano.archivo %}
                            <p><a href="{{ plano.archivo.url }}" target="_blank">Ver archivo</a></p>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No hay planos asociados.</p>
        {% endif %}
    </div>
    <!-- BOT√ìN GENERAR PRESUPUESTO -->
    <div class="text-end mt-3">
        <a href="{% url 'facturacion:nuevo_presupuesto' trabajo.id %}" class="btn-sitag" style="background:#508265;color:white;">
            üí∞ Generar Presupuesto
        </a>
    </div>

    <!-- BOT√ìN VOLVER -->
    <div class="text-end mt-3">
        <a href="{% url 'trabajos:lista_trabajos' %}" class="btn-sitag">
            ‚Üê Volver
        </a>
    </div>

</div>

{% endblock %}
